allprojects {
    apply {
        plugin 'idea'
        plugin 'java'
        plugin 'maven'
        plugin 'eclipse'
    }
    [compileJava, compileTestJava]*.options*.encoding = "UTF-8"
    sourceCompatibility = 1.8
    targetCompatibility = 1.8
    sourceSets.main.java.srcDirs += ["src/gen/java"]
    repositories {
        maven { url "http://maven.aliyun.com/nexus/content/groups/public/" }
    }
    configurations {
        all*.exclude group: 'commons-logging', module: 'commons-logging'
        all*.exclude group: 'log4j', module: 'log4j'
        all*.exclude group: 'org.slf4j', module: 'slf4j-log4j12'
    }

    task sourcesJar(type: Jar, dependsOn: classes) {
        classifier = 'sources'
        from sourceSets.main.allSource
    }

    artifacts {
        archives sourcesJar
    }

    dependencies {
        compile 'com.jcraft:jsch:0.1.53'
        compile 'commons-io:commons-io:2.4'
    }
}